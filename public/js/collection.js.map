{"version":3,"sources":["collection.coffee"],"names":[],"mappings":"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","file":"collection.js","sourcesContent":["Vue.component 'vinyls',\n    template: '#vinyls-template'\n    props: ['userid']\n\n    data: ->\n        list: []\n        currentPage: 0\n        itemsPerPage: 16\n        resultCount: 0\n        filter: \"\"\n        sorting: \"\"\n        order: 1\n        loading: true\n\n    computed:\n        totalPages: ->\n            return Math.ceil @resultCount / @itemsPerPage\n\n        nextButtonClass: ->\n            return \"disabled\" if @currentPage >= @totalPages - 1\n            return \"\"\n\n        prevButtonClass: ->\n            return \"disabled\" if @currentPage is 0\n            return \"\"\n\n        orderButtonClass: ->\n            return \"fa fa-sort-amount-asc\" if @order is 1\n            return \"fa fa-sort-amount-desc\"\n\n    created: ->\n        @fetchVinylList()\n\n    methods:\n        deleteVinyl: (vinyl, event) ->\n            event.preventDefault()\n            event.stopPropagation()\n\n            swal\n                title: \"Are you sure?\"\n                text: \"This will remove the vinyl from your collection!\"\n                type: \"warning\",\n                showCancelButton: true,\n                confirmButtonColor: \"#DD6B55\"\n                confirmButtonText: \"Yes, delete it!\"\n                closeOnConfirm: true\n            , =>\n                console.log \"delete vinyl with id=#{vinyl.id}\"\n                $.ajaxSetup\n                    headers:\n                        'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n\n                $.ajax\n                    url: \"/vinyl/#{vinyl.id}/delete\"\n                    method: \"DELETE\"\n                    success: =>\n                        @list.$remove(vinyl)\n\n        fetchVinylList: ->\n            $.getJSON \"/api/user/#{@userid}/vinyls/all\", (response) =>\n                @list = response\n                @currentPage = 0\n                @loading = false\n\n        setPage: (pageNumber) ->\n            @currentPage = pageNumber\n\n        nextPage: ->\n            @currentPage++ if @currentPage isnt @totalPages\n\n        prevPage: ->\n            @currentPage-- if @currentPage > 0\n\n        changeOrder: ->\n            @order = @order * -1\n\n\nVue.filter 'chunk', (value, size) ->\n    return _.chunk value, size\n\nVue.filter 'paginate', (list) ->\n    @resultCount = list.length\n    if @resultCount isnt 0\n        @currentPage = @totalPages - 1 if @currentPage >= @totalPages\n    else\n        @currentPage = 0\n    index = @currentPage * @itemsPerPage\n    return list.slice index, index + @itemsPerPage\n\nnew Vue\n    el: '#collection'\n"],"sourceRoot":"/source/"}