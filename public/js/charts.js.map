{"version":3,"sources":["charts.coffee"],"names":[],"mappings":"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","file":"charts.js","sourceRoot":"/source/","sourcesContent":["root = exports ? this\n\nroot.getStats = (userId) ->\n  console.log 'user: '+userId\n\n  $vinyls = $.ajax\n    url: '/api/user/'+userId+'/vinyls'\n    type: 'GET'\n    dataType: 'JSON'\n    error: (x,status,error) ->\n      console.log status\n      console.log error\n    success: (vinyls) -> # search results received\n      console.log vinyls\n\n      genreData = []\n\n      sizeData = [\n        ['x'],\n        ['sizes']\n      ]\n      sizeData_temp = []\n\n      timeData = [\n        ['x']\n        ['vinyls']\n      ]\n      timeData_temp = []\n\n      _.each vinyls, (vinyl) ->\n        # --- Genre --------------------------------\n        genre = vinyl.genre.split(';')[0]\n        if genre == \"\"\n          genre = \"unknown\"\n        genreData.push(genre)\n\n        # --- Size --------------------------------\n        size = vinyl.size\n        sizeData_temp.push(size)\n\n        # --- Time --------------------------------\n        time = vinyl.releasedate.substr(vinyl.releasedate.length - 4)\n        if time != \"\"\n          timeData_temp.push(time)\n      \n      genreData = _.chain(genreData).countBy().pairs().value()\n\n      sizeData_temp = _.chain(sizeData_temp).countBy().pairs().value()\n      _.each sizeData_temp, (sizeArray) ->\n        sizeData[0].push(sizeArray[0])\n        sizeData[1].push(sizeArray[1])\n\n      timeData_temp = _.chain(timeData_temp).countBy().pairs().value()\n      _.each timeData_temp, (timeArray) ->\n        timeData[0].push(timeArray[0])\n        timeData[1].push(timeArray[1])\n\n      genreChart = c3.generate\n        bindto: '#genreChart'\n        data:\n          columns: genreData\n          type: 'donut'\n        legend:\n          show: true\n        donut:\n          title: vinyls.length+' Vinyls'\n          label:\n            format: (value) ->\n                return value\n\n      sizeChart = c3.generate\n        bindto: '#sizeChart'\n        data:\n          x: 'x'\n          columns: sizeData\n          types:\n            sizes: 'bar'\n        legend:\n          show: false\n        axis:\n          x:\n            type: 'categorized'\n\n      timeChart = c3.generate\n        bindto: '#timeChart'\n        data:\n          x: 'x'\n          columns: [\n            ['x', '2010-01-01', '2011-01-01', '2012-01-01', '2013-01-01', '2014-01-01', '2015-01-01']\n            ['vinyls', 30, 200, 100, 400, 150, 250]\n          ]\n        axis:\n          x: \n            type: 'timeseries'\n            tick:\n              format: (x) -> \n                return x.getFullYear()\n        legend:\n          show: false"]}