{"version":3,"sources":["charts.coffee"],"names":[],"mappings":"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","file":"charts.js","sourcesContent":["userId = $('#statistics').data('userid')\n\nnew Vue\n    el: '#statistics'\n\n    data:\n        loading: true\n        vinyls: []\n        userId: userId\n        genreData:\n            labels: []\n            datasets: [\n                {\n                    label: \"Genre Distrbution\"\n                    backgroundColor: [\n                        \"#56c9b8\",\n                        \"#2f9fc2\",\n                        \"#4466b3\",\n                        \"#7d4193\",\n                        \"#975aaa\",\n                        \"#a44b8b\",\n                        \"#be5f5f\",\n                        \"#b98657\",\n                        \"#e8c56a\",\n                        \"#bee488\",\n                        \"#60b04c\",\n                        \"#5fda9b\"\n                    ]\n                    hoverBorderColor: \"#FFF\"\n                    data: []\n                }\n            ]\n        sizeData:\n            labels: []\n            datasets: [\n                {\n                    label: \"Vinyl Sizes\"\n                    backgroundColor: [\n                        \"#202020\",\n                        \"#404040\",\n                        \"#606060\"\n                    ]\n                    hoverBorderColor: \"#FFF\"\n                    data: []\n                }\n            ]\n        timeData:\n            labels: []\n            datasets: [\n                {\n                    label: \"Vinyl Release Dates\"\n                    fill: false,\n                    lineTension: 0.1,\n                    backgroundColor: \"rgba(75,192,192,0.4)\"\n                    borderColor: \"rgba(75,192,192,1)\"\n                    borderCapStyle: 'butt'\n                    borderDash: []\n                    borderDashOffset: 0.0,\n                    borderJoinStyle: 'miter'\n                    pointBorderColor: \"rgba(75,192,192,1)\"\n                    pointBackgroundColor: \"#fff\"\n                    pointBorderWidth: 1\n                    pointHoverRadius: 5\n                    pointHoverBackgroundColor: \"rgba(75,192,192,1)\"\n                    pointHoverBorderColor: \"rgba(220,220,220,1)\"\n                    pointHoverBorderWidth: 2\n                    pointRadius: 1\n                    pointHitRadius: 10\n                    data: []\n                }\n            ]\n\n    methods:\n        fetchVinylList: (userId) ->\n            $.getJSON \"/api/user/#{userId}/vinyls/all\", (response) =>\n                @vinyls = response\n                @loading = false\n                @generateCharts(@vinyls)\n\n        generateCharts: (vinyls) ->\n            allGenres = []\n            allSizes = []\n            allTimes = []\n\n            genreCount = []\n            sizeCount = []\n            timeCount = []\n\n            _.each vinyls, (vinyl) ->\n                # Genre\n                genre = vinyl.genre.split(';')[0]\n                genre = \"unknown\" if genre is \"\"\n                allGenres.push(genre)\n                genreCount = _.chain(allGenres).countBy().toPairs().value()\n                # Sizes\n                size = vinyl.size\n                allSizes.push(size)\n                sizeCount = _.chain(allSizes).countBy().toPairs().value()\n                # Times\n                time = vinyl.releasedate\n                allTimes.push(time)\n                timeCount = _.chain(allTimes).countBy().toPairs().value()\n\n            _.each genreCount, (genre) =>\n                @genreData.labels.push(genre[0])\n                @genreData.datasets[0].data.push(genre[1])\n\n            _.each sizeCount, (size) =>\n                @sizeData.labels.push(\"#{size[0]}inch\")\n                @sizeData.datasets[0].data.push(size[1])\n\n            _.each timeCount, (time) =>\n                @timeData.labels.push(\"#{time[0]}\")\n                @timeData.datasets[0].data.push(time[1])\n\n            genreChartCanvas = $(\"#genreChart\")\n            genreChart = new Chart genreChartCanvas,\n                type: 'pie',\n                data: @genreData\n\n            sizeChartCanvas = $(\"#sizeChart\")\n            sizeChart = new Chart sizeChartCanvas,\n                type: 'pie',\n                data: @sizeData\n\n            timeChartCanvas = $(\"#timeChart\")\n            timeChart = new Chart timeChartCanvas,\n                type: 'line',\n                data: @timeData\n\n    ready: ->\n        @fetchVinylList(@userId)\n"],"sourceRoot":"/source/"}