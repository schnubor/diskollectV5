{"version":3,"sources":["app.coffee","helper.coffee","charts.coffee","collection.coffee","createVinyl.coffee","getStatus.coffee","import.coffee","jukebox.coffee","search.coffee","settings.coffee","welcome.coffee"],"names":[],"mappings":"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","file":"app.js","sourcesContent":["# console.log \"hello from coffeescript!!\"\n\n# Init tooltips\n$('[data-toggle=\"tooltip\"]').tooltip()\n\n# Init Popovers\n$('[data-toggle=\"popover\"]').popover\n    html: true\n","# Calc Median\n# ----------------------------\ngetMedian = (values) ->\n    values.sort (a,b) -> return a - b\n    half = Math.floor values.length/2\n    if values.length % 2\n        return values[half]\n    else\n        return (values[half-1] + values[half]) / 2.0\n\n# Fetch price of vinyl ID\n# ----------------------------------\n$.fetchPrice = (id, userCurrency, callback) ->\n\n    EURinUSD = 1.12 # USD\n    EURinGBP = 0.79 # GBP\n    GBPinUSD = 1.42 # USD\n\n    $.ajax\n        url: \"https://api.discogs.com/marketplace/search?release_id=#{id}\"\n        type: 'GET'\n        dataType: 'JSON'\n        error: (x,status,error) ->\n            console.log status\n            console.log error\n        success: (prices) -> # prices\n            # console.log prices\n            values = []\n            median = 0\n\n            # convert all prices to EUR and add up\n            _.each prices, (price) ->\n                currency = price.currency\n\n                switch(price.currency)\n                    when 'EUR'\n                        values.push(parseInt(price.price.substr(1)))\n                    when 'GBP'\n                        values.push(parseInt(price.price.substr(1)) / EURinGBP)\n                    when 'USD'\n                        values.push(parseInt(price.price.substr(1)) / EURinUSD)\n\n            # calc median\n            median = getMedian(values).toFixed(2)\n\n            # convert to users currency\n            switch(userCurrency)\n                when 'EUR'\n                    median = median\n                when 'GBP'\n                    median = median * EURinGBP\n                when 'USD'\n                    median = median * EURinUSD\n\n            callback(median)\n\n# Map fetched vinyl data to object required to create vinyl\n# ---------------------------------------------------------\n$.mapVinylData = (vinyl) ->\n    $vinylData = {}\n\n    # artist\n    if vinyl.artists\n        $vinylData.artist = vinyl.artists[0].name\n    else\n        $vinylData.artist = 'unknown artist'\n\n    # title\n    if vinyl.title\n        $vinylData.title = vinyl.title\n    else\n        $vinylData.title = 'unknown title'\n\n    # cover\n    if vinyl.images\n        $vinylData.cover = vinyl.images[0].uri\n    else\n        $vinylData.cover = 'images/PH_vinyl.svg'\n\n    # label & catno\n    if vinyl.labels\n        $vinylData.label = vinyl.labels[0].name\n        if vinyl.labels[0].catno\n            $vinylData.catno = vinyl.labels[0].catno\n        else\n            $vinylData.catno = 'unknown catno'\n    else\n        $vinylData.label = 'unknown label'\n\n    # genre\n    if vinyl.genres\n        $vinylData.genre = vinyl.genres[0]\n    else\n        $vinylData.genre = 'unknown genre'\n\n    # country\n    if vinyl.country\n        $vinylData.country = vinyl.country\n    else\n        $vinylData.country = 'unknown country'\n\n    # year\n    if vinyl.year\n        $vinylData.year = vinyl.year\n    else\n        $vinylData.year = 'unknown year'\n\n    # count\n    if vinyl.format_quantity\n        $vinylData.count = vinyl.format_quantity\n    else\n        $vinylData.count = 'unknown quantity'\n\n    # weight\n    if vinyl.estimated_weight\n        $vinylData.weight = vinyl.estimated_weight\n    else\n        $vinylData.weight = '0'\n\n    # type\n    if vinyl.type\n        $vinylData.type = vinyl.type\n    else\n        $vinylData.type = '-'\n\n    # color\n    $vinylData.color = '#000000'\n\n    # size\n    $vinylData.size = '12'\n\n    # format\n    $vinylData.format = 'LP'\n\n    # release ID\n    $vinylData.release_id = vinyl.id\n\n    # Discogs URI\n    $vinylData.discogs_uri = vinyl.uri\n\n    # tracklist\n    if vinyl.tracklist\n        tmpTracklist = []\n        for track, key in vinyl.tracklist\n            # console.log key, track\n            tmpTracklist.push\n                duration: track.duration\n                position: track.position\n                title: track.title\n        $vinylData.tracklist = tmpTracklist\n    else\n        $vinylData.tracklist = []\n\n    # videos\n    if vinyl.videos\n        $vinylData.videos = vinyl.videos\n    else\n        $vinylData.videos = []\n\n    return $vinylData\n","$.fetchVinylPage = (page) ->\n    vinyls = []\n    $vinyls = $.ajax\n        url: '/api/user/'+userId+'/vinyls'\n        type: 'GET'\n        dataType: 'JSON'\n        error: (x,status,error) ->\n            console.log status\n            console.log error\n        success: (response) ->\n            return response.data\n\n$.getStats = (userId) ->\n    $vinyls = $.ajax\n        url: '/api/user/'+userId+'/vinyls/all'\n        type: 'GET'\n        dataType: 'JSON'\n        error: (x,status,error) ->\n            console.log status\n            console.log error\n        success: (vinyls) -> # search results received\n            # console.log vinyls\n            genreData = []\n\n            sizeData = [\n                ['x'],\n                ['sizes']\n            ]\n            sizeData_temp = []\n\n            timeData = [\n                ['x']\n                ['vinyls']\n            ]\n            timeData_temp = []\n\n            _.each vinyls, (vinyl) ->\n                # --- Genre --------------------------------\n                genre = vinyl.genre.split(';')[0]\n                genre = \"unknown\" if genre is \"\"\n                genreData.push(genre)\n\n                # --- Size --------------------------------\n                size = vinyl.size\n                sizeData_temp.push(size)\n\n                # --- Time --------------------------------\n                time = new Date(vinyl.releasedate)\n                if time.getFullYear()\n                    timeData_temp.push(time.format('Y'))\n\n            # console.log timeData_temp\n\n            genreData = _.chain(genreData).countBy().toPairs().value()\n\n            sizeData_temp = _.chain(sizeData_temp).countBy().toPairs().value()\n            _.each sizeData_temp, (sizeArray) ->\n                sizeData[0].push(sizeArray[0])\n                sizeData[1].push(sizeArray[1])\n\n            timeData_temp = _.chain(timeData_temp).countBy().toPairs().value()\n            _.each timeData_temp, (timeArray) ->\n                timeData[0].push(timeArray[0])\n                timeData[1].push(timeArray[1])\n\n            # console.log timeData\n\n            # --- Charts --------------------------------\n            genreChart = c3.generate\n                bindto: '#genreChart'\n                data:\n                    columns: genreData\n                    type: 'donut'\n                legend:\n                    show: true\n                donut:\n                    title: vinyls.length + ' Vinyls'\n                    label:\n                        format: (value) ->\n                            return value\n\n            sizeChart = c3.generate\n                bindto: '#sizeChart'\n                data:\n                    x: 'x'\n                    columns: sizeData\n                    types:\n                        sizes: 'bar'\n                legend:\n                    show: false\n                axis:\n                    x:\n                        type: 'categorized'\n\n            timeChart = c3.generate\n                bindto: '#timeChart'\n                data:\n                    x: 'x'\n                    columns: timeData\n                legend:\n                    show: false\n","Vue.component 'vinyls',\n    template: '#vinyls-template'\n    props: ['userid']\n\n    data: ->\n        list: []\n        currentPage: 0\n        itemsPerPage: 16\n        resultCount: 0\n        filter: \"\"\n        sorting: \"created_at\"\n\n        #classes\n        pageButtonClass: \"active\"\n\n    computed:\n        totalPages: ->\n            return Math.ceil @resultCount / @itemsPerPage\n\n        nextButtonClass: ->\n            return \"disabled\" if @currentPage >= @totalPages - 1\n            return \"\"\n\n        prevButtonClass: ->\n            return \"disabled\" if @currentPage is 0\n            return \"\"\n\n    created: ->\n        @fetchVinylList()\n\n    methods:\n        fetchVinylList: ->\n            $.getJSON \"/api/user/#{@userid}/vinyls/all\", (response) =>\n                @list = response\n                @currentPage = 0\n\n        setPage: (pageNumber) ->\n            @currentPage = pageNumber\n\n        nextPage: ->\n            @currentPage++ if @currentPage isnt @totalPages\n\n        prevPage: ->\n            @currentPage-- if @currentPage > 0\n\nVue.filter 'chunk', (value, size) ->\n    return _.chunk value, size\n\nVue.filter 'paginate', (list) ->\n    @resultCount = list.length\n    if @resultCount isnt 0\n        @currentPage = @totalPages - 1 if @currentPage >= @totalPages\n    else\n        @currentPage = 0\n    index = @currentPage * @itemsPerPage\n    return list.slice index, index + @itemsPerPage\n\nnew Vue\n    el: '#collection'\n","# Add Track\n# ----------------------------\n\n$('.createVinyl .js-add-track').click ->\n    #console.log 'click'\n    $tracks = $('.createVinyl input[name=\"trackCount\"]').val()\n    $tracks++\n    $('.createVinyl input[name=\"trackCount\"]').val($tracks)\n    $('.js-trackTable').append('<tr class=\"track'+($tracks-1)+'\"><td width=\"80px\" style=\"padding-left: 0;\"><input class=\"form-control\" placeholder=\"A1\" name=\"track_'+($tracks-1)+'_position\" type=\"text\"></td><td><input class=\"form-control\" placeholder=\"Title\" name=\"track_'+($tracks-1)+'_title\" type=\"text\"></td><td width=\"100px\"><input class=\"form-control\" placeholder=\"1:13\" name=\"track_'+($tracks-1)+'_duration\" type=\"text\"></td></tr>')\n\nreadUrl = (input) ->\n    if input.files and input.files[0]\n        reader = new FileReader()\n        reader.onload = (e) ->\n            $('#vinylCover').attr('src', e.target.result)\n            reader.readAsDataURL(input.files[0])\n\n$(\"input[name='coverFile']\").change ->\n    readUrl(this)\n\n$(\"input[name='cover']\").change ->\n    $('#vinylCover').attr('src', $(this).val())\n\n# Delete Track\n# ----------------------------\n\n$('.editVinyl .js-delete-track').click ->\n    id = $(this).data('trackId')\n    console.log 'click '+id\n    $('tr.track'+id)\n","$.getStatus = (userId) ->\n    $vinyls = $.ajax\n        url: '/api/user/'+userId+'/status'\n        type: 'GET'\n        error: (x,status,error) -> # not connected\n            console.warn status\n            console.warn error\n            $('.js-connectionStatus').removeClass('btn-info').addClass('btn-danger').html('<i class=\"fa fa-fw fa-exclamation-circle\"></i> Not connected')\n            $('.js-connectionAction').removeClass 'hidden'\n            return false\n        success: (response) -> # connected\n            $('.js-connectionStatus').removeClass('btn-info').addClass('btn-success').html('<i class=\"fa fa-fw fa-check\"></i> Connected')\n            return true\n","discogs_vinyls = []\nvinylsToImport = []\n\n# Fetch a site from discogs\n# -----------------------------------\n$.fetchDiscogsPage = (username, page, promises = []) ->\n    request = $.ajax\n        url: \"https://api.discogs.com/users/#{username}/collection/folders/0/releases?page=#{page}&per_page=100\"\n        type: 'GET'\n        error: (x,status,error) ->\n            console.log status\n            console.log error\n        success: (response) ->\n            console.log response\n            return response.releases\n    promises.push(request)\n\n# Compare Discogs and User collection\n# -----------------------------------\n$.getVinylsToImport = (discogs_vinyls, user_vinyls) ->\n    alreadyInCollection = []\n    for discogs_vinyl in discogs_vinyls\n        for user_vinyl in user_vinyls\n            alreadyInCollection.push discogs_vinyl if discogs_vinyl.id is parseInt user_vinyl.release_id\n\n    # remove vinyls that are already in collection\n    onlyInA = alreadyInCollection.filter((current) ->\n        return discogs_vinyls.filter((current_b) ->\n            return current_b.id == current.id\n        ).length == 0\n    )\n\n    onlyInB = discogs_vinyls.filter((current) ->\n        return alreadyInCollection.filter((current_a) ->\n            return current_a.id == current.id\n        ).length == 0\n    )\n\n    vinylsToImport = onlyInA.concat(onlyInB)\n    return {\n        \"vinylsToImport\" : vinylsToImport\n        \"alreadyInCollection\" : alreadyInCollection\n    }\n\n$.getReleases = (username, user_id) ->\n    $('.js-startImport').html('<i class=\"fa fa-fw fa-spin fa-refresh\"></i> Scan Discogs')\n\n    user_vinyls = []\n    discogs_vinyls = []\n\n    $.ajax\n        url: \"https://api.discogs.com/users/#{username}/collection/folders/0/releases?page=1&per_page=100\"\n        type: 'GET'\n        error: (x,status,error) ->\n            console.log status\n            console.log error\n        success: (response) ->\n            console.log 'pagination: ', response.pagination\n            promises = []\n            currentPage = 1\n\n            # Get discogs collection\n            # -----------------------------------------------\n            while currentPage <= response.pagination.pages\n                request = $.ajax\n                    url: \"https://api.discogs.com/users/#{username}/collection/folders/0/releases?page=#{currentPage}&per_page=100\"\n                    type: 'GET'\n                    error: (x,status,error) ->\n                        console.log status\n                        console.log error\n                    success: (response) ->\n                        console.log response\n                        for release in response.releases\n                            discogs_vinyls.push release\n                promises.push(request)\n                currentPage++\n\n            $.when.apply(null, promises).done ->\n                # Get vinyls that are already in users collection\n                # -----------------------------------------------\n                $userVinylsCall = $.ajax\n                    url: '/api/user/'+user_id+'/vinyls'\n                    type: 'GET'\n                    error: (x,status,error) ->\n                        console.log status\n                        console.log error\n                    success: (response) ->\n                        user_vinyls = response.data\n                        # console.log user_vinyls, discogs_vinyls\n\n                        vinylsObj = $.getVinylsToImport(discogs_vinyls, user_vinyls)\n                        console.log \"vinyls to import: \", vinylsToImport\n\n                        # show fetch results\n                        $('.js-startImport').fadeOut 400, ->\n                            $('.js-vinylsFound').text discogs_vinyls.length\n                            $('.js-alreadyInCollection').text vinylsObj.alreadyInCollection.length\n                            $('.js-vinylsToImport').text vinylsObj.vinylsToImport.length\n                            $('.js-startMapping').attr('disabled', 'disabled') unless vinylsObj.vinylsToImport.length\n                            $('.js-importFetchResults').fadeIn()\n\n# Click Start Mapping\n# ----------------------------\n$('.js-startMapping').click ->\n    console.log \"Starting Mapping ...\"\n    $('.js-startMapping').hide()\n    $('.js-importProgress').show()\n    processNext(0)\n\n# Add vinyl n from discogs collection\n# -----------------------------------\nprocessNext = (n) ->\n    console.log \"Processing vinyl index #{n}\"\n    # update progress bar\n    $('.js-importProgress .progress-bar').css('width', \"#{(100 * n) / vinylsToImport.length}%\" )\n    $('.js-importProgress .progress-bar').text(\"#{Math.round(((100 * n) / vinylsToImport.length) * 100) / 100}%\")\n\n    if n < vinylsToImport.length\n        $('.js-currentImportVinyl').text(\"#{vinylsToImport[n].basic_information.artists[0].name} - #{vinylsToImport[n].basic_information.title}\")\n        $.ajax\n            url: \"/api/discogs/#{vinylsToImport[n].id}\"\n            type: \"GET\"\n            error: (x,status,error) ->\n                console.log status\n                console.log error\n            success: (vinyl) -> # fetched vinyl from Discogs\n                userCurrency = $('meta[name=user-currency]').attr('content')\n                $.fetchPrice vinyl.id, userCurrency, (price) ->\n                    $vinylData = $.mapVinylData vinyl\n                    $vinylData.price = price\n                    $vinylData._token = $('meta[name=csrf-token]').attr('content')  # attach CSRF token\n\n                    $.ajax\n                        url: '/vinyl/create'\n                        type: 'POST'\n                        data: $vinylData\n                        success: (reponse) ->\n                            console.log \"vinyl #{n} added!\"\n                            n++\n                            processNext(n)\n                        error: (error) ->\n                            console.warn error\n    else # import complete\n        $('.js-currentImportVinyl').hide()\n        $('.js-importProgress .progress-bar').addClass('progress-bar-success')\n        $('.js-importComplete').show()\n","###\n  String to time\n###\nString::toHHMMSS = ->\n    sec_num = parseInt(this, 10)\n    # don't forget the second param\n    hours = Math.floor(sec_num / 3600)\n    minutes = Math.floor((sec_num - (hours * 3600)) / 60)\n    seconds = sec_num - (hours * 3600) - (minutes * 60)\n    if hours < 10\n        hours = '0' + hours\n    if minutes < 10\n        minutes = '0' + minutes\n    if seconds < 10\n        seconds = '0' + seconds\n    time = hours + ':' + minutes + ':' + seconds\n    time\n\n###\n  Youtube API\n###\n\ntag = document.createElement('script')\ntag.src = 'https://www.youtube.com/iframe_api'\nfirstScriptTag = document.getElementsByTagName('script')[0]\nfirstScriptTag.parentNode.insertBefore tag, firstScriptTag\nplayer = undefined\ncheckPlayer = undefined\n\ndelay = (ms, func) -> setTimeout func, ms\n\n###\n  JukeBox functionality\n###\n\n$.jukebox = (vinyls) ->\n\n    # YT stuff\n    window.onYouTubeIframeAPIReady = ->\n        # console.log \"ready\"\n        player = new (YT.Player)('player', events:\n            'onReady': onPlayerReady\n            'onStateChange': onPlayerStateChange)\n        return\n\n    onPlayerStateChange = (state) ->\n        # console.log state.data\n\n\n    onPlayerReady = ->\n        # console.log 'hey Im ready'\n        player.playVideo()\n\n        checkPlayer = setInterval ->\n            state = player.getPlayerState()\n            console.log state\n            if(state == -1 || state == 0)\n                clearInterval(checkPlayer)\n                checkPlayer = 0\n                $.jukebox(vinyls)\n        , 2000\n        return\n\n    #console.log vinyls\n    vinyl = vinyls[Math.floor(Math.random()*vinyls.length)]\n    video = vinyl.videos[Math.floor(Math.random()*vinyl.videos.length)]\n\n    # fill artwork & link\n    $('.js-cover').attr('src', vinyl.artwork)\n    $('.js-link').attr('href', '/vinyl/'+vinyl.id)\n\n    # fill vinyl title\n    $('.js-vinylTitle').text(vinyl.artist+' â€“ '+vinyl.title)\n\n    # fill video title + duration\n    duration = video.duration.toHHMMSS()\n    $('.js-videoTitle').html(video.title+'<span class=\"badge pull-right\">' + duration + '</span>')\n\n    # fill player\n    $('#player').attr('src', video.uri+\"?&controls=0&enablejsapi=1&showinfo=0&autohide=1&iv_load_policy=3\")\n\n    # skip\n    $('.js-skip').click ->\n        clearInterval(checkPlayer)\n        checkPlayer = 0\n        $.jukebox(vinyls)\n","# Globals\n# ----------------------------\n\n$results = []\n$vinylData = {}\n$search = null\n\n# Submit Search\n# ----------------------------\n\n$('#submit-search').click (e) ->\n    console.log 'Hello from search.'\n\n    # show loading icon, hide and clear result table\n    e.preventDefault()\n    $('.loading').fadeIn()\n    $('.search-help').hide()\n    $('.search-results-table').hide()\n    $('.no-results').hide()\n    $('.search-results-table').find('tbody').html('')\n\n    # request data from discogs.com\n    $search = $.ajax\n        url: '/search'\n        type: 'POST'\n        data:\n            _token: $(\"#search-vinyl-form input[name='_token']\").val()\n            artist: $(\"#search-vinyl-form input[name='artist']\").val()\n            title: $(\"#search-vinyl-form input[name='title']\").val()\n            catno: $(\"#search-vinyl-form input[name='catno']\").val()\n        dataType: 'JSON'\n        error: (x,status,error) ->\n            console.log status\n            console.log error\n            if error == 'abort'\n                $('.loading').fadeOut()\n            else\n                $('.loading').html('<p class=\"placeholder\">Oops! <br> Try refreshing your Discogs Connection</p><a href=\"/oauth/discogs\" class=\"btn btn-lg btn-primary\"><i class=\"fa fa-fw fa-exchange\"></i> Refresh Discogs Token</a>')\n\n        success: (results) -> # search results received\n            console.log results\n            $results = results\n            $index = 0\n            $('.loading').fadeOut ->\n                if results.length\n                    $('.search-results-table').fadeIn()\n                    _.each results, (result) ->\n                        #console.log result\n\n                        # artist\n                        if result.artists\n                            $artist = result.artists[0].name\n                        else\n                            $artist = '<em>unknown artist</em>'\n\n                        # cover\n                        if result.images\n                            $cover = result.images[0].uri150\n                        else\n                            $cover = '/images/PH_vinyl.svg'\n\n                        # title\n                        if result.title\n                            $title = result.title\n                        else\n                            $title = '<em>unknown title</em>'\n\n                        # catno\n                        if result.type == 'release'\n                            $catno = result.labels[0].catno\n                        else\n                            $catno = '<em>no catalog number</em>'\n\n                        # link\n                        $link = '/vinyl/add?id='+result.id+'?type='+result.type\n\n                        $vinyl = '<tr><td class=\"cover\"><img src=\"'+$cover+'\" alt=\"cover\"></td><td>'+$artist+'</td><td>'+$title+'</td><td>'+$catno+'</td><td><!--<a href=\"'+$link+'\" class=\"btn btn-sm btn-info\"><i class=\"fa fa-fw fa-edit\"></i> Edit</a>--><button class=\"btn btn-sm btn-success quick-add\" data-toggle=\"modal\" data-target=\"#quickAddVinyl\" data-result=\"'+$index+'\"><i class=\"fa fa-fw fa-plus\"></i> Add</button></td></tr>'\n                        $('.search-results-table').find('tbody').append($vinyl)\n\n                        # increase index\n                        $index++\n                else\n                    $('.no-results').fadeIn()\n\n# Cancel search\n# ----------------------------\n\n$('#cancel-search').click ->\n    $('.search-help').fadeIn()\n    $('.loading').fadeOut()\n    $search.abort()\n\n# Close Modal\n# ----------------------------\n\n$('#quickAddVinyl').on 'hidden.bs.modal', (e) ->\n    modal = $(this)\n    $('#searchModalSubmit').disabled = true # disable submit\n    $('#addVinylForm .trackInfo').remove() # remove track infos\n    $('#currencyLabel').hide() # remove price\n    modal.find('input[name=\"price\"]').before('<input type=\"hidden\" name=\"price\"/>').remove()\n    unless($('#price').length) # as long as not already present\n        modal.find('input[name=\"price\"]').before('<p class=\"h1\" id=\"price\">Fetching...</p>') # show price text\n    else\n        $('#price').text('Fetching...')\n    $('#priceLabelText').text('Discogs median price:')\n\n# Quick add\n# ----------------------------\n\n$('#quickAddVinyl').on 'show.bs.modal', (e) ->\n    button = $(e.relatedTarget)\n    vinyl_index = button.data 'result'\n    vinyl = $results[vinyl_index]\n    modal = $(this)\n    console.log vinyl\n\n    # fetch Spotify tracklist\n    $spotify = $.ajax\n        url: 'https://api.spotify.com/v1/search?q=album%3A'+vinyl.title+'+artist%3A'+vinyl.artists[0].name+'&type=album'\n        type: 'GET'\n        dataType: 'JSON'\n        error: (x,status,error) ->\n            console.log status\n            console.log error\n        success: (results) -> # search results received\n            # console.log results\n            if(results.albums.items.length)\n                $('#spotify').html('<iframe src=\"https://embed.spotify.com/?uri=spotify%3Aalbum%3A'+results.albums.items[0].id+'\" width=\"598\" height=\"380\" frameborder=\"0\" allowtransparency=\"true\"></iframe>')\n                $vinylData.spotify_id = results.albums.items[0].id\n\n    # fetch price\n    userCurrency = $('#userCurrency').val()\n    $.fetchPrice vinyl.id, userCurrency, (price) ->\n        # show the price & add to form\n        if(isNaN(price))\n            # no prices on Discogs -> show text input for price\n            modal.find('input[name=\"price\"]').before('<input type=\"text\" name=\"price\" class=\"form-control\" placeholder=\"required\" required aria-describedby=\"currencyLabel\"/>').remove()\n            $('#currencyLabel').text(userCurrency).show()\n            $('#price').remove()\n            $('#priceLabelText').text('What did you pay?')\n        else\n            $('#price').html(price+' '+userCurrency)\n            modal.find('input[name=\"price\"]').val(price)\n\n    # enable submit button\n    $('#searchModalSubmit').disabled = false\n\n    # map fetched vinyl data to object required to create vinyl\n    $vinylData = $.mapVinylData vinyl\n\n    # visible form data\n    modal.find('.modal-title').text('Add \"' + vinyl.artists[0].name + ' - '+ vinyl.title + '\" to collection')\n    modal.find('.modal-body .cover').html('<img src=\"'+$vinylData.cover+'\" class=\"thumbnail\" width=\"100%\">')\n\n# Submit Add Modal\n# ----------------------------\n\n$('#searchModalSubmit').on 'click', (e) ->\n    e.preventDefault()\n    e.stopPropagation()\n\n    button = e.target\n    $vinylData._token = $(button).data 'token' # attach CSRF token\n    $vinylData.price = $('#quickAddVinyl').find('input[name=price]').val()\n    console.log $vinylData\n    # fetch Spotify tracklist\n    $createVinyl = $.ajax\n        url: '/vinyl/create'\n        type: 'POST'\n        data: $vinylData\n        success: (reponse) ->\n            console.log 'vinyl added!'\n            $('#quickAddVinyl').modal('hide')\n            $('body').append '<div class=\"flash-message\"><div class=\"alert alert-success fade in\"><button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-hidden=\"true\">Ã—</button><b>'+ $vinylData.artist + ' - ' + $vinylData.title + '</b> is now in your collection.</div></div>'\n        error: (error) ->\n            console.warn error\n            $('body').append '<div class=\"flash-message\"><div class=\"alert alert-danger fade in\"><button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-hidden=\"true\">Ã—</button>Oops! Something went wrong, please try again.</div></div>'\n","new Vue\n    el: '#settings'\n\n    data:\n        confirm: \"\"\n\n    computed:\n        disabled: ->\n            return false if @confirm is \"delete\"\n            return true\n\n    methods:\n        delete: ->\n            console.log \"delete!\"\n","scaleVid = ->\n    width = $(window).width()\n    height = $(window).height()\n    ratio = width / height\n    widescreen = 16 / 9\n\n    if(ratio < widescreen) # window ratio is 4:3\n        $('#bgvid').css('width', 'auto')\n        $('#bgvid').css('height', '100%')\n    else\n        $('#bgvid').css('width', '100%')\n        $('#bgvid').css('height', 'auto')\n\n$(document).ready ->\n    scaleVid()\n\n$(window).resize ->\n    scaleVid()\n"],"sourceRoot":"/source/"}