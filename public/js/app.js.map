{"version":3,"sources":["app.coffee","charts.coffee","createVinyl.coffee","getStatus.coffee","import.coffee","jukebox.coffee","search.coffee","welcome.coffee"],"names":[],"mappings":"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","file":"app.js","sourcesContent":["# console.log \"hello from coffeescript!!\"\n\n# Init tooltips\n$('[data-toggle=\"tooltip\"]').tooltip()\n\n# Init Popovers\n$('[data-toggle=\"popover\"]').popover\n    html: true","$.getStats = (userId) ->\n  console.log 'user: '+userId\n\n  $vinyls = $.ajax\n    url: '/api/user/'+userId+'/vinyls'\n    type: 'GET'\n    dataType: 'JSON'\n    error: (x,status,error) ->\n      console.log status\n      console.log error\n    success: (vinyls) -> # search results received\n      #console.log vinyls\n\n      genreData = []\n\n      sizeData = [\n        ['x'],\n        ['sizes']\n      ]\n      sizeData_temp = []\n\n      timeData = [\n        ['x']\n        ['vinyls']\n      ]\n      timeData_temp = []\n\n      _.each vinyls, (vinyl) ->\n        # --- Genre --------------------------------\n        genre = vinyl.genre.split(';')[0]\n        if genre == \"\"\n          genre = \"unknown\"\n        genreData.push(genre)\n\n        # --- Size --------------------------------\n        size = vinyl.size\n        sizeData_temp.push(size)\n\n        # --- Time --------------------------------\n        time = new Date(vinyl.releasedate)\n        if time.getFullYear()\n          timeData_temp.push(time.format('Y'))\n\n      console.log timeData_temp\n      \n      genreData = _.chain(genreData).countBy().pairs().value()\n\n      sizeData_temp = _.chain(sizeData_temp).countBy().pairs().value()\n      _.each sizeData_temp, (sizeArray) ->\n        sizeData[0].push(sizeArray[0])\n        sizeData[1].push(sizeArray[1])\n\n      timeData_temp = _.chain(timeData_temp).countBy().pairs().value()\n      _.each timeData_temp, (timeArray) ->\n        timeData[0].push(timeArray[0])\n        timeData[1].push(timeArray[1])\n\n\n      console.log timeData\n\n\n      # --- Charts --------------------------------\n      genreChart = c3.generate\n        bindto: '#genreChart'\n        data:\n          columns: genreData\n          type: 'donut'\n        legend:\n          show: true\n        donut:\n          title: vinyls.length+' Vinyls'\n          label:\n            format: (value) ->\n                return value\n\n      sizeChart = c3.generate\n        bindto: '#sizeChart'\n        data:\n          x: 'x'\n          columns: sizeData\n          types:\n            sizes: 'bar'\n        legend:\n          show: false\n        axis:\n          x:\n            type: 'categorized'\n\n      timeChart = c3.generate\n        bindto: '#timeChart'\n        data:\n          x: 'x'\n          columns: timeData\n        legend:\n          show: false","# Add Track\n# ----------------------------\n\n$('.createVinyl .js-add-track').click ->\n  #console.log 'click'\n  $tracks = $('.createVinyl input[name=\"trackCount\"]').val()\n  $tracks++\n  $('.createVinyl input[name=\"trackCount\"]').val($tracks)\n  \n  $('.js-trackTable').append('<tr class=\"track'+($tracks-1)+'\"><td width=\"80px\" style=\"padding-left: 0;\"><input class=\"form-control\" placeholder=\"A1\" name=\"track_'+($tracks-1)+'_position\" type=\"text\"></td><td><input class=\"form-control\" placeholder=\"Title\" name=\"track_'+($tracks-1)+'_title\" type=\"text\"></td><td width=\"100px\"><input class=\"form-control\" placeholder=\"1:13\" name=\"track_'+($tracks-1)+'_duration\" type=\"text\"></td></tr>')\n\nreadUrl = (input) ->\n  if input.files and input.files[0]\n    reader = new FileReader()\n    reader.onload = (e) ->\n      $('#vinylCover').attr('src', e.target.result)\n\n    reader.readAsDataURL(input.files[0]);\n\n$(\"input[name='coverFile']\").change ->\n  readUrl(this)\n\n$(\"input[name='cover']\").change ->\n  $('#vinylCover').attr('src', $(this).val())\n\n# Delete Track\n# ----------------------------\n\n$('.editVinyl .js-delete-track').click ->\n  id = $(this).data('trackId')\n  console.log 'click '+id\n  $('tr.track'+id)","$.getStatus = (userId) ->\n  console.log userId\n  $vinyls = $.ajax\n    url: '/api/user/'+userId+'/status'\n    type: 'GET'\n    error: (x,status,error) -> # not connected\n      console.log status\n      console.log error\n      $('.js-connectionStatus').removeClass('btn-info').addClass('btn-danger').html('<i class=\"fa fa-fw fa-exclamation-circle\"></i> Not connected')\n      $('.js-connectionAction').removeClass('hidden');\n    success: (response) -> # connected\n      $('.js-connectionStatus').removeClass('btn-info').addClass('btn-success').html('<i class=\"fa fa-fw fa-check\"></i> Connected')","$.getReleases = (username, user_id) ->\n    $('.js-startImport').fadeOut 400, ->\n        $('.js-importResults').html('<p class=\"placeholder\">Fetching ...</p>')\n\n    $discogs = $.ajax\n        url: 'https://api.discogs.com/users/'+username+'/collection/folders/0/releases'\n        type: 'GET'\n        error: (x,status,error) ->\n            console.log status\n            console.log error\n        success: (response) ->\n            #console.log response\n            discogs_vinyls = response.releases\n            user_vinyls = null\n\n            $api = $.ajax\n                url: '/api/user/'+user_id+'/vinyls'\n                type: 'GET'\n                error: (x,status,error) ->\n                    console.log status\n                    console.log error\n                success: (response) ->\n                    user_vinyls = response\n                    # imports = $.grep() \n                    $('.js-importResults').html('<p class=\"placeholder\">Found '+discogs_vinyls.length+' records in your Discogs collection.</p>')\n                    \n                    $.each discogs_vinyls, (index) ->\n                        $('.js-importTable').find('tbody').append('<tr><td>'+discogs_vinyls[index].id+'</td><td>'+discogs_vinyls[index].basic_information.artists[0].name+'</td><td>'+discogs_vinyls[index].basic_information.title+'</td></tr>');\n                    $('.js-importTable').fadeIn()\n","###\n  String to time\n###\nString::toHHMMSS = ->\n  sec_num = parseInt(this, 10)\n  # don't forget the second param\n  hours = Math.floor(sec_num / 3600)\n  minutes = Math.floor((sec_num - (hours * 3600)) / 60)\n  seconds = sec_num - (hours * 3600) - (minutes * 60)\n  if hours < 10\n    hours = '0' + hours\n  if minutes < 10\n    minutes = '0' + minutes\n  if seconds < 10\n    seconds = '0' + seconds\n  time = hours + ':' + minutes + ':' + seconds\n  time\n\n###\n  Youtube API\n###\n\ntag = document.createElement('script')\ntag.src = 'https://www.youtube.com/iframe_api'\nfirstScriptTag = document.getElementsByTagName('script')[0]\nfirstScriptTag.parentNode.insertBefore tag, firstScriptTag\nplayer = undefined\ncheckPlayer = undefined\n\ndelay = (ms, func) -> setTimeout func, ms\n\n###\n  JukeBox functionality\n###\n\n$.jukebox = (vinyls) ->\n\n  # YT stuff\n  window.onYouTubeIframeAPIReady = ->\n    # console.log \"ready\"\n    player = new (YT.Player)('player', events:\n      'onReady': onPlayerReady\n      'onStateChange': onPlayerStateChange)\n    return\n\n  onPlayerStateChange = (state) ->\n    # console.log state.data\n    \n\n  onPlayerReady = ->\n    # console.log 'hey Im ready'\n    player.playVideo()\n    \n    checkPlayer = setInterval ->\n        state = player.getPlayerState()\n        console.log state\n        if(state == -1 || state == 0)\n          clearInterval(checkPlayer)\n          checkPlayer = 0\n          $.jukebox(vinyls)\n      , 2000\n    return\n\n  #console.log vinyls\n  vinyl = vinyls[Math.floor(Math.random()*vinyls.length)]\n  video = vinyl.videos[Math.floor(Math.random()*vinyl.videos.length)]\n\n  # fill artwork & link\n  $('.js-cover').attr('src', vinyl.artwork)\n  $('.js-link').attr('href', '/vinyl/'+vinyl.id)\n\n  # fill vinyl title\n  $('.js-vinylTitle').text(vinyl.artist+' â€“ '+vinyl.title)\n\n  # fill video title + duration\n  duration = video.duration.toHHMMSS()\n  $('.js-videoTitle').html(video.title+'<span class=\"badge pull-right\">' + duration + '</span>')\n\n  # fill player\n  $('#player').attr('src', video.uri+\"?&controls=0&enablejsapi=1&showinfo=0&autohide=1&iv_load_policy=3\")\n\n  # skip\n  $('.js-skip').click ->\n    clearInterval(checkPlayer)\n    checkPlayer = 0\n    $.jukebox(vinyls)","# Globals\n# ----------------------------\n\n$results = []\n$search = null\n\nEURinUSD = 1.14 # USD\nEURinGBP = 0.73 # GBP\nGBPinUSD = 1.53 # USD\n\n# Calc Median\n# ----------------------------\n\ngetMedian = (values) ->\n  values.sort  (a,b)=> return a - b\n  half = Math.floor values.length/2\n  if values.length % 2 \n    return values[half]\n  else\n    return (values[half-1] + values[half]) / 2.0\n\n# Submit Search\n# ----------------------------\n\n$('#submit-search').click (e) ->\n  console.log 'Hello from search.'\n  \n  # show loading icon, hide and clear result table\n  e.preventDefault()\n  $('.loading').fadeIn()\n  $('.search-help').hide()\n  $('.search-results-table').hide()\n  $('.no-results').hide()\n  $('.search-results-table').find('tbody').html('');\n\n  # request data from discogs.com\n  $search = $.ajax\n    url: '/search'\n    type: 'POST'\n    data: \n      _token: $(\"#search-vinyl-form input[name='_token']\").val()\n      artist: $(\"#search-vinyl-form input[name='artist']\").val()\n      title: $(\"#search-vinyl-form input[name='title']\").val()\n      catno: $(\"#search-vinyl-form input[name='catno']\").val()\n    dataType: 'JSON'\n    error: (x,status,error) ->\n      console.log status\n      console.log error\n      if error == 'abort'\n        $('.loading').fadeOut()\n      else\n        $('.loading').html('<p class=\"placeholder\">Oops! <br> Try refreshing your Discogs Connection</p><a href=\"/oauth/discogs\" class=\"btn btn-lg btn-primary\"><i class=\"fa fa-fw fa-exchange\"></i> Refresh Discogs Token</a>')\n\n    success: (results) -> # search results received\n      # console.log results\n      $results = results\n      $index = 0\n      $('.loading').fadeOut ->\n        if results.length\n          $('.search-results-table').fadeIn()\n          _.each results, (result) ->\n            #console.log result\n\n            # artist\n            if result.artists\n              $artist = result.artists[0].name\n            else\n              $artist = '<em>unknown artist</em>'\n\n            # cover\n            if result.images\n              $cover = result.images[0].uri150\n            else\n              $cover = '/images/PH_vinyl.svg'\n\n            # title\n            if result.title\n              $title = result.title\n            else\n              $title = '<em>unknown title</em>'\n\n            # catno\n            if result.type == 'release'\n              $catno = result.labels[0].catno\n            else\n              $catno = '<em>no catalog number</em>'\n\n            # link\n            $link = '/vinyl/add?id='+result.id+'?type='+result.type\n\n            $vinyl = '<tr><td class=\"cover\"><img src=\"'+$cover+'\" alt=\"cover\"></td><td>'+$artist+'</td><td>'+$title+'</td><td>'+$catno+'</td><td><!--<a href=\"'+$link+'\" class=\"btn btn-sm btn-info\"><i class=\"fa fa-fw fa-edit\"></i> Edit</a>--><button class=\"btn btn-sm btn-success quick-add\" data-toggle=\"modal\" data-target=\"#quickAddVinyl\" data-result=\"'+$index+'\"><i class=\"fa fa-fw fa-plus\"></i> Add</button></td></tr>';\n            $('.search-results-table').find('tbody').append($vinyl);\n\n            # increase index\n            $index++\n        else\n          $('.no-results').fadeIn()\n\n# Cancel search\n# ----------------------------\n\n$('#cancel-search').click ->\n  $('.search-help').fadeIn()\n  $('.loading').fadeOut()\n  $search.abort()\n\n# Close Modal\n# ----------------------------\n\n$('#quickAddVinyl').on 'hidden.bs.modal', (e) ->\n  modal = $(this)\n  $('#modalSubmit').disabled = true         # disable submit\n  $('#addVinylForm .trackInfo').remove()    # remove track infos\n  $('#currencyLabel').hide()                # remove price\n  modal.find('input[name=\"price\"]').before('<input type=\"hidden\" name=\"price\"/>').remove()\n  unless($('#price').length)                # as long as not already present\n    modal.find('input[name=\"price\"]').before('<p class=\"h1\" id=\"price\">Fetching...</p>') # show price text\n  else\n    $('#price').text('Fetching...')\n  $('#priceLabelText').text('Discogs median price:')\n\n# Quick add\n# ----------------------------\n\n$('#quickAddVinyl').on 'show.bs.modal', (e) ->\n  button = $(e.relatedTarget)\n  vinyl_index = button.data 'result'\n  vinyl = $results[vinyl_index]\n  modal = $(this)\n  console.log vinyl\n\n  # fetch Spotify tracklist\n  $spotify = $.ajax\n    url: 'https://api.spotify.com/v1/search?q=album%3A'+vinyl.title+'+artist%3A'+vinyl.artists[0].name+'&type=album'\n    type: 'GET'\n    dataType: 'JSON'\n    error: (x,status,error) ->\n      console.log status\n      console.log error\n    success: (results) -> # search results received\n      console.log results\n      if(results.albums.items.length)\n        $('#spotify').html('<iframe src=\"https://embed.spotify.com/?uri=spotify%3Aalbum%3A'+results.albums.items[0].id+'\" width=\"598\" height=\"380\" frameborder=\"0\" allowtransparency=\"true\"></iframe>')\n        modal.find('input[name=\"spotify_id\"]').val(results.albums.items[0].id)\n\n  # fetch price\n  $priceRequest = $.ajax\n    url: '//api.discogs.com/marketplace/search?release_id='+vinyl.id\n    type: 'GET'\n    dataType: 'JSON'\n    error: (x,status,error) ->\n      console.log status\n      console.log error\n    success: (prices) -> # prices\n      # console.log prices\n      userCurrency = $('#userCurrency').val()\n      values = []\n      median = 0\n\n      # convert all prices to EUR and add up\n      _.each prices, (price) ->\n        currency = price.currency\n        \n        switch(price.currency)\n          when 'EUR'\n            values.push(parseInt(price.price.substr(1)))\n          when 'GBP'\n            values.push(parseInt(price.price.substr(1)) / EURinGBP)\n          when 'USD'\n            values.push(parseInt(price.price.substr(1)) / EURinUSD)\n      \n      # calc median\n      median = getMedian(values).toFixed(2)\n\n      # convert to users currency\n      switch(userCurrency)\n        when 'EUR'\n          median = median\n        when 'GBP'\n          median = median * EURinGBP\n        when 'USD'\n          median = median * EURinUSD\n\n      # show the price & add to form\n      if(isNaN(median))\n        # no prices on Discogs -> show text input for price\n        modal.find('input[name=\"price\"]').before('<input type=\"text\" name=\"price\" class=\"form-control\" placeholder=\"required\" required aria-describedby=\"currencyLabel\"/>').remove()\n        $('#currencyLabel').text(userCurrency).show()\n        $('#price').remove()\n        $('#priceLabelText').text('What did you pay?')\n      else\n        $('#price').html(median+' '+userCurrency)\n        modal.find('input[name=\"price\"]').val(median)\n\n      # enable submit button\n      $('#modalSubmit').disabled = false\n\n  # artist\n  if vinyl.artists\n    $artist = vinyl.artists[0].name\n  else\n    $artist = 'unknown artist'\n\n  # title\n  if vinyl.title\n    $title = vinyl.title\n  else\n    $title = 'unknown title'\n\n  # cover\n  if vinyl.images\n    $cover = vinyl.images[0].uri\n  else\n    $cover = 'images/PH_vinyl.svg'\n\n  # label & catno\n  if vinyl.labels\n    $label = vinyl.labels[0].name\n    if vinyl.labels[0].catno\n      $catno = vinyl.labels[0].catno\n    else\n      $catno = 'unknown catno'\n  else\n    $label = 'unknown label'\n\n  # genre\n  if vinyl.genres\n    $genre = vinyl.genres[0]\n  else\n    $genre = 'unknown genre'\n\n  # country\n  if vinyl.country\n    $country = vinyl.country\n  else\n    $country = 'unknown country'\n\n  # year\n  if vinyl.year\n    $year = vinyl.year\n  else\n    $year = 'unknown year'\n\n  # count\n  if vinyl.format_quantity\n    $count = vinyl.format_quantity\n  else\n    $count = 'unknown quantity'\n\n  # weight\n  if vinyl.estimated_weight\n    $weight = vinyl.estimated_weight\n  else\n    $weight = '0'\n\n  # type\n  if vinyl.type\n    $type = vinyl.type\n  else\n    $type = '-'\n\n  # color\n  $color = '#000000'\n\n  # size\n  $size = '12'\n\n  # format\n  $format = 'LP'\n\n  # release ID\n  $release_id = vinyl.id\n\n  # Discogs URI\n  $discogs_uri = vinyl.uri\n\n  # tracklist\n  if vinyl.tracklist\n    $tracklist = vinyl.tracklist\n  else\n    $tracklist = []\n\n  # videos\n  if vinyl.videos\n    $videos = vinyl.videos\n  else\n    $videos = []\n\n  # visible form data\n  modal.find('.modal-title').text('Add \"' + vinyl.artists[0].name + ' - '+ vinyl.title + '\" to collection')\n  modal.find('.modal-body .cover').html('<img src=\"'+$cover+'\" class=\"thumbnail\" width=\"100%\">')\n  \n  # invisible form data\n  modal.find('input[name=\"artist\"]').val($artist)\n  modal.find('input[name=\"title\"]').val($title)\n  modal.find('input[name=\"cover\"]').val($cover)\n  modal.find('input[name=\"label\"]').val($label)\n  modal.find('input[name=\"catno\"]').val($catno)\n  modal.find('input[name=\"genre\"]').val($genre)\n  modal.find('input[name=\"country\"]').val($country)\n  modal.find('input[name=\"year\"]').val($year)\n  modal.find('input[name=\"count\"]').val($count)\n  modal.find('input[name=\"color\"]').val($color)\n  modal.find('input[name=\"format\"]').val($format)\n  modal.find('input[name=\"size\"]').val($size)\n  modal.find('input[name=\"weight\"]').val($weight)\n  modal.find('input[name=\"type\"]').val($type)\n  modal.find('input[name=\"release_id\"]').val($release_id)\n  modal.find('input[name=\"discogs_uri\"]').val($discogs_uri)\n  modal.find('input[name=\"trackCount\"]').val($tracklist.length)\n  modal.find('input[name=\"videoCount\"]').val($videos.length)\n  _.each $tracklist, (track, index) ->\n    #console.log track\n    modal.find('#addVinylForm').append('<input class=\"trackInfo\" name=\"track_'+index+'_title\" type=\"hidden\" value=\"'+track.title+'\"/>');\n    modal.find('#addVinylForm').append('<input class=\"trackInfo\" name=\"track_'+index+'_position\" type=\"hidden\" value=\"'+track.position+'\"/>');\n    modal.find('#addVinylForm').append('<input class=\"trackInfo\" name=\"track_'+index+'_duration\" type=\"hidden\" value=\"'+track.duration+'\"/>');\n  _.each $videos, (video, index) ->\n    #console.log video\n    # rewrite uri to embed uri\n    uri = \"//www.youtube.com/embed/\"+video.uri.substr(video.uri.length-11)\n    modal.find('#addVinylForm').append('<input class=\"videoInfo\" name=\"video_'+index+'_title\" type=\"hidden\" value=\"'+video.title+'\"/>');\n    modal.find('#addVinylForm').append('<input class=\"videoInfo\" name=\"video_'+index+'_uri\" type=\"hidden\" value=\"'+uri+'\"/>');\n    modal.find('#addVinylForm').append('<input class=\"videoInfo\" name=\"video_'+index+'_duration\" type=\"hidden\" value=\"'+video.duration+'\"/>');\n","scaleVid = ->\n  width = $(window).width()\n  height = $(window).height()\n  ratio = width / height\n  widescreen = 16 / 9\n\n  if(ratio < widescreen)  # window ratio is 4:3\n    $('#bgvid').css('width', 'auto')\n    $('#bgvid').css('height', '100%')\n  else\n    $('#bgvid').css('width', '100%')\n    $('#bgvid').css('height', 'auto')\n\n$(document).ready ->\n  scaleVid()\n\n$(window).resize ->\n  scaleVid()"],"sourceRoot":"/source/"}