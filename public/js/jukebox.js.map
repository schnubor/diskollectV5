{"version":3,"sources":["jukebox.coffee"],"names":[],"mappings":"AAAA;AAAA,EAAA,CAAC,CAAC,OAAF,GAAY,SAAC,MAAD,GAAA;AACR,QAAA,6BAAA;AAAA,IAAA,OAAO,CAAC,GAAR,CAAY,QAAA,GAAS,MAArB,CAAA,CAAA;AAAA,IAEA,MAAA,GAAS,EAFT,CAAA;AAAA,IAGA,MAAA,GAAS,EAHT,CAAA;WAKA,aAAA,GAAgB,CAAC,CAAC,IAAF,CACZ;AAAA,MAAA,GAAA,EAAK,YAAA,GAAa,MAAb,GAAoB,SAAzB;AAAA,MACA,IAAA,EAAM,KADN;AAAA,MAEA,QAAA,EAAU,MAFV;AAAA,MAGA,KAAA,EAAO,SAAC,CAAD,EAAG,MAAH,EAAU,KAAV,GAAA;AACL,QAAA,OAAO,CAAC,GAAR,CAAY,MAAZ,CAAA,CAAA;eACA,OAAO,CAAC,GAAR,CAAY,KAAZ,EAFK;MAAA,CAHP;AAAA,MAMA,OAAA,EAAS,SAAC,QAAD,GAAA;AACL,YAAA,mBAAA;AAAA,QAAA,MAAA,GAAS,QAAT,CAAA;AAAA,QACA,OAAO,CAAC,GAAR,CAAY,MAAZ,CADA,CAAA;AAAA,QAIA,KAAA,GAAQ,MAAO,CAAA,IAAI,CAAC,KAAL,CAAW,IAAI,CAAC,MAAL,CAAA,CAAA,GAAc,MAAM,CAAC,MAAhC,CAAA,CAJf,CAAA;AAAA,QAKA,OAAO,CAAC,GAAR,CAAY,KAAK,CAAC,EAAlB,CALA,CAAA;eAQA,YAAA,GAAe,CAAC,CAAC,IAAF,CACX;AAAA,UAAA,GAAA,EAAK,aAAA,GAAc,KAAK,CAAC,EAApB,GAAuB,SAA5B;AAAA,UACA,IAAA,EAAM,KADN;AAAA,UAEA,QAAA,EAAU,MAFV;AAAA,UAGA,KAAA,EAAO,SAAC,CAAD,EAAG,MAAH,EAAU,KAAV,GAAA;AACL,YAAA,OAAO,CAAC,GAAR,CAAY,MAAZ,CAAA,CAAA;mBACA,OAAO,CAAC,GAAR,CAAY,KAAZ,EAFK;UAAA,CAHP;AAAA,UAMA,OAAA,EAAS,SAAC,QAAD,GAAA;AACL,YAAA,OAAO,CAAC,GAAR,CAAY,QAAZ,CAAA,CAAA;AACA,YAAA,IAAG,QAAQ,CAAC,MAAZ;AACI,cAAA,OAAO,CAAC,GAAR,CAAY,KAAZ,CAAA,CAAA;qBACA,OAAO,CAAC,GAAR,CAAY,QAAS,CAAA,IAAI,CAAC,KAAL,CAAW,IAAI,CAAC,MAAL,CAAA,CAAA,GAAc,QAAQ,CAAC,MAAlC,CAAA,CAArB,EAFJ;aAAA,MAAA;qBAII,CAAC,CAAC,OAAF,CAAU,MAAV,EAJJ;aAFK;UAAA,CANT;SADW,EATV;MAAA,CANT;KADY,EANR;EAAA,CAAZ,CAAA;AAAA","file":"jukebox.js","sourceRoot":"/source/","sourcesContent":["$.jukebox = (userId) ->\n    console.log 'user: '+userId\n\n    vinyls = []\n    videos = []\n\n    vinylsRequest = $.ajax\n        url: '/api/user/'+userId+'/vinyls'\n        type: 'GET'\n        dataType: 'JSON'\n        error: (x,status,error) ->\n          console.log status\n          console.log error\n        success: (response) -> # search results received\n            vinyls = response\n            console.log vinyls\n\n            # pick a random vinyl\n            vinyl = vinyls[Math.floor(Math.random()*vinyls.length)]\n            console.log vinyl.id\n\n            # try to fetch a video for that vinyl\n            videoRequest = $.ajax\n                url: '/api/vinyl/'+vinyl.id+'/videos'\n                type: 'GET'\n                dataType: 'JSON'\n                error: (x,status,error) ->\n                  console.log status\n                  console.log error\n                success: (response) -> # search results received\n                    console.log response\n                    if(response.length)\n                        console.log vinyl\n                        console.log response[Math.floor(Math.random()*response.length)]\n                    else\n                        $.jukebox(userId)\n\n\n            #on sucess: display the vinyl and the video \n\n"]}