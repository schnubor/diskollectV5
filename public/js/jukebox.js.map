{"version":3,"sources":["jukebox.coffee"],"names":[],"mappings":"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","file":"jukebox.js","sourceRoot":"/source/","sourcesContent":["###\n  String to time\n###\nString::toHHMMSS = ->\n  sec_num = parseInt(this, 10)\n  # don't forget the second param\n  hours = Math.floor(sec_num / 3600)\n  minutes = Math.floor((sec_num - (hours * 3600)) / 60)\n  seconds = sec_num - (hours * 3600) - (minutes * 60)\n  if hours < 10\n    hours = '0' + hours\n  if minutes < 10\n    minutes = '0' + minutes\n  if seconds < 10\n    seconds = '0' + seconds\n  time = hours + ':' + minutes + ':' + seconds\n  time\n\n###\n  Youtube API\n###\n\ntag = document.createElement('script')\ntag.src = 'https://www.youtube.com/iframe_api'\nfirstScriptTag = document.getElementsByTagName('script')[0]\nfirstScriptTag.parentNode.insertBefore tag, firstScriptTag\nplayer = undefined\ncheckPlayer = undefined\n\ndelay = (ms, func) -> setTimeout func, ms\n\n###\n  JukeBox functionality\n###\n\n$.jukebox = (vinyls) ->\n\n  # YT stuff\n  window.onYouTubeIframeAPIReady = ->\n    # console.log \"ready\"\n    player = new (YT.Player)('player', events:\n      'onReady': onPlayerReady\n      'onStateChange': onPlayerStateChange)\n    return\n\n  onPlayerStateChange = (state) ->\n    # console.log state.data\n    \n\n  onPlayerReady = ->\n    # console.log 'hey Im ready'\n    player.playVideo()\n    \n    checkPlayer = setInterval ->\n        state = player.getPlayerState()\n        console.log state\n        if(state == -1 || state == 0)\n          clearInterval(checkPlayer)\n          checkPlayer = 0\n          $.jukebox(vinyls)\n      , 2000\n    return\n\n  #console.log vinyls\n  vinyl = vinyls[Math.floor(Math.random()*vinyls.length)]\n  video = vinyl.videos[Math.floor(Math.random()*vinyl.videos.length)]\n\n  # fill artwork\n  $('.js-cover').attr('src', vinyl.artwork)\n\n  # fill vinyl title\n  $('.js-vinylTitle').text(vinyl.artist+' â€“ '+vinyl.title)\n\n  # fill video title + duration\n  duration = video.duration.toHHMMSS()\n  $('.js-videoTitle').html(video.title+'<span class=\"badge pull-right\">' + duration + '</span>')\n\n  # fill player\n  $('#player').attr('src', video.uri+\"?&controls=0&enablejsapi=1&showinfo=0&autohide=1&iv_load_policy=3\")\n\n  # skip\n  $('.js-skip').click ->\n    clearInterval(checkPlayer)\n    checkPlayer = 0\n    $.jukebox(vinyls)"]}